
存储系统分为四种：

分布式文件系统：图片、照片、视频等非结构化数据对象，对象之间没有关系，一般称为Blob数据。存储三类数据：Blob对象、定长块及大文件。

分布式键值系统：用于存储关系简单的半结构化数据，只提供基于主键的CRUD功能。与Hash表比较类似，一般用作缓存

分布式表格系统：用于存储关系比较复杂的半结构化数据，不仅支持简单的CRUD操作，而且支持扫描某个主键范围。

分布式数据库：用于存储结构化数据。采用二维表格组织数据，提供SQL关系查询语言。



## 3.分布式系统

### 3.1 基本概念
**异常：**

服务器宕机： 需要考虑从持久化介质（磁盘）中的数据来恢复内存信息，从而恢复到宕机前的摸一个一致状态

网络异常：网络不可靠，系统设计时总是假设网络将会出现异常并采取相应措施

磁盘故障：将数据存储到多台服务器

**超时：**

**一致性：** 从客户角度考虑：1）强一致性 2）最终一致性
最终一致性描述：
a.读写一致性
b.会话一致性 
c.单调读一致性
d.单调写一致性

**衡量指标：** 性能（tps/qps），可用性，一致性，可扩展性

### 3.2 性能分析
网络io ，磁盘io ，cpu ，内存

### 3.3 数据分布
哈希分布 ，顺序分布 ，负载均衡

### 3.4 复制

强一致性导致系统可用性变差，
系统可用性与一致性彼此牵制，需要具体情况具体权衡

### 3.5 容错

1.通过租约协议实现故障检测，通俗讲就是心跳包

2.常见故障：磁盘故障，多备份

3.故障恢复：若是临时故障那就等待一段时间重新上线，如果是永久故障则需要增加副本操作进行添加
总控节点也要将状态实时同步到备机，当故障发生时，可以通过外部服务选举某个备机作为新的总控节点。

### 3.6 可扩展性

1.总控节点：
维护数据分布信息，工作机管理，数据定位，故障检测和恢复，负载均衡等全局调度工作。通过引入总控节点，可以使得系统的设计更加简单，并且更加容易做到抢一致性，对用户友好。

瓶颈：分布式文件系统的总控节点中，内存容量可能率先成为性能瓶颈。

2.数据库扩容：

主从数据库 提高读取能力

垂直·水平拆分 将数据分布到多个存储节点

主从复制将系统扩展到多个数据中心

传统架构面临的问题：扩容不够灵活、扩容不够自动化、增加副本时间长

3.异构系统

分片副本

### 3.7 分布式事务
paxos 2PC 不再赘述
### 3.8 跨机房部署
//todo

## 4. 分布式文件系统

## 5. 分布式键值系统

## 6. 分布式表格系统 

## 7. 分布式数据库




**OceanBase相关**
```
最终写结果表HBase和Datahub时，如果每处理一条记录都去写库的话，就会很大限制我们的吞吐。我们组件通过时间触发或者记录数触发的机制（timer功能），实现批量传输和批量写（mini-batch sink），并且可以根据业务延时要求进行灵活配置，提高任务吞吐的同时，也降低了服务端压力。

```
参考：

https://blog.csdn.net/b0Q8cpra539haFS7/article/details/78589622  阿里双十一

https://cloud.tencent.com/developer/article/1481183  大规模分布式存储系统原理解析与架构实战

https://zhuanlan.zhihu.com/p/35622907 列式存储

https://dbaplus.cn/news-160-2027-1.html 阿里OceanBase


**探索内容方向：OceanBase**