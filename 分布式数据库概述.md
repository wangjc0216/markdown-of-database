## 1.主流数据库的比较

**mysql**

无论数据还是索引都存放在硬盘中。到要使用的时候才交换到内存中。能够处理远超过内存总量的数据。

关系型数据库。

在不同的引擎上有不同 的存储方式。

查询语句是使用传统的 SQL 语句，拥有较为成熟的体系，成熟度很高。


**mongo**

它是一个内存数据库，数据都是放在内存里面的。

对数据的操作大部分都在内存中，但 MongoDB 并不是单纯的内存数据库。

MongoDB 将数据存储为一个文档，数据结构由键值(key=>value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组。

天然对分布式数据库的支持

**redis**

它就是一个不折不扣的内存数据库。

持久化方式：

Redis 所有数据都是放在内存中的，持久化是使用 RDB 方式或者 aof 方式。

注：aof RDB 为两种redis快照方式 相关扩展：[redis快照为什么不会阻塞其他请求](https://mp.weixin.qq.com/s/PJ1-D9XK3pd7fWUUpm4FyQ)


## 2. 高性能的理解

增大负载能力，缩短查询时间，在同等时间完成尽可能多的业务处理



## 3.单机数据库的性能因素

1.并发。为增加数据库单位时间的处理事务能力，数据库引入并发事务，同时引出了并发问题，为解决并发问题，引出了三种常见的并发控制机制（悲观锁，乐观锁，MVCC），可参考[浅谈数据库并发机制](https://draveness.me/database-concurrency-control)


2.索引。为提高读性能，数据库引入索引，以牺牲写性能为代价。
  （mysql使用的是B+树，为了减少遍历查询对磁盘的io操作，  mongo使用的是B树，虽然遍历数据的查询是相对常见的，但是 MongoDB 认为查询单个数据记录远比遍历数据更加常见，由于 B 树的非叶结点也可以存储数据，所以查询一条数据所需要的平均随机 IO 次数会比 B+ 树少，使用 B 树的 MongoDB 在类似场景中的查询速度就会比 MySQL 快。）

3.使用场景。根据不同数据类型进行数据库选型，使用场景不尽相同


## 3. 分布式数据库达到高性能的手段

1.对数据进行分片 （分库分表）

2.对服务的故障检测与监控，对磁盘故障的预处理，主备切换做到高可用

3.对数据分布的处理增加服务处理的吞吐

4.物理设备的性能保障（cpu，内存，磁盘）

5.对分布式事务的处理优化 ，可参考[分布式事务及分布式事务解决方案](https://juejin.im/post/5b5a0bf9f265da0f6523913b)


## 4.分片的策略




## 5.主流分布式数据库

1.主流的OLAP（数据仓库），分析数据，读多写少，数据分片形式存储，我们通过增加冗余，减少分布式事务的复杂度来提升效率

2.Google Spanner为代表的 shared nothing 的架构，自动分片，分布式事务，弹性性能，类似的有TiDB、CockroachDB、OceanBase

//shared nothing 就是各个处理单元都有各自私有的cpu，内存，和磁盘系统

3.Auraro 主要思想是计算和存储分离架构，使用共享存储技术，这样就提高了容灾和总容量的扩展。但是在协议层，只要是不涉及到存储的部分，本质还是单机实例的 MySQL，不涉及分布式存储和分布式计算，这样就和 MySQL 兼容性非常高。（没有了解）





